<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>species_mix objects — species_mix • ecomix</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="species_mix objects — species_mix" />

<meta property="og:description" content="Fits a finite mixture model to identify species archetype
models (SAMs).
This function runs the 'species_mix' function but it iterates through groups (1 to 10) by default." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ecomix</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>species_mix objects</h1>
    
    <div class="hidden name"><code>species_mix-class.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Fits a finite mixture model to identify species archetype
models (SAMs).</p>
<p>This function runs the 'species_mix' function but it iterates through groups (1 to 10) by default.</p>
    
    </div>

    <pre class="usage"><span class='fu'>species_mix</span>(<span class='kw'>archetype_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>species_formula</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/formula'>as.formula</a></span>(~<span class='fl'>1</span>), <span class='no'>data</span>, <span class='kw'>n_mixtures</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>distribution</span> <span class='kw'>=</span> <span class='st'>"bernoulli"</span>, <span class='kw'>offset</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>control</span> <span class='kw'>=</span> <span class='fu'>species_mix.control</span>(), <span class='kw'>inits</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>standardise</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>titbits</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>species_mix.fit</span>(<span class='no'>y</span>, <span class='no'>X</span>, <span class='no'>G</span>, <span class='no'>S</span>, <span class='no'>spp_weights</span>, <span class='no'>site_spp_weights</span>, <span class='no'>offset</span>,
  <span class='kw'>y_is_na</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>distribution_numeric</span>, <span class='no'>control</span>, <span class='kw'>inits</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>species_mix.multifit</span>(<span class='kw'>archetype_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>species_formula</span> <span class='kw'>=</span> ~<span class='fl'>1</span>, <span class='no'>data</span>,
  <span class='kw'>distribution</span> <span class='kw'>=</span> <span class='st'>"bernoulli"</span>, <span class='kw'>nstart</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>n_mixtures</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>offset</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>control</span> <span class='kw'>=</span> <span class='fu'>species_mix.control</span>(),
  <span class='kw'>inits</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>standardise</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>species_mix.control</span>(<span class='kw'>maxit</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>trace</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>cores</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>residuals</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>init_method</span> <span class='kw'>=</span> <span class='st'>"kmeans"</span>, <span class='kw'>init_sd</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>em_prefit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>em_steps</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>em_refit</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>em_maxit</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>em_abstol</span> <span class='kw'>=</span> <span class='fu'>sqrt</span>(<span class='no'>.Machine</span>$<span class='no'>double.eps</span>), <span class='kw'>em_reltol</span> <span class='kw'>=</span> <span class='no'>reltol_fun</span>,
  <span class='kw'>em_maxtau</span> <span class='kw'>=</span> <span class='fl'>0.8</span>, <span class='kw'>em_calculate_hessian</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>em_full_model</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>r1</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>maxit_cpp</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>trace_cpp</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>nreport_cpp</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>abstol_cpp</span> <span class='kw'>=</span> <span class='fu'>sqrt</span>(<span class='no'>.Machine</span>$<span class='no'>double.eps</span>),
  <span class='kw'>reltol_cpp</span> <span class='kw'>=</span> <span class='fu'>sqrt</span>(<span class='no'>.Machine</span>$<span class='no'>double.eps</span>), <span class='kw'>conv_cpp</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>printparams_cpp</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>optimise_cpp</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>loglOnly_cpp</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>derivOnly_cpp</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>getscores_cpp</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>calculate_hessian_cpp</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>simulate_species_mix_data</span>(<span class='no'>archetype_formula</span>, <span class='no'>species_formula</span>, <span class='no'>dat</span>, <span class='no'>theta</span>,
  <span class='kw'>distribution</span> <span class='kw'>=</span> <span class='st'>"bernoulli"</span>)

<span class='fu'>species_mix_estimate_groups</span>(<span class='kw'>archetype_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>species_formula</span> <span class='kw'>=</span> ~<span class='fl'>1</span>,
  <span class='no'>data</span>, <span class='kw'>n_mixtures</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>distribution</span> <span class='kw'>=</span> <span class='st'>"bernoulli"</span>, <span class='kw'>offset</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>control</span> <span class='kw'>=</span> <span class='fu'>species_mix.control</span>(), <span class='kw'>inits</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>standardise</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>species_formula</th>
      <td><p>an object of class "formula" (or an object that can be
coerced to that class). The right hand side of this formula specifies the
dependence of the species"'" data on covariates (typically different covariates
to <code>archetype_formula</code> to avoid confusing confounding). Current the formula
is set at ~ 1 by default for species-specific intercepts for the archetype models.
If you include a species specific formula which has more than an intercept you
will be fitting a partial species archetype model which has species
specific covariates and archetype specific covariates.</p></td>
    </tr>
    <tr>
      <th>n_mixtures</th>
      <td><p>The number of mixing components (groups) to fit.</p></td>
    </tr>
    <tr>
      <th>distribution</th>
      <td><p>The family of statistical distribution to use within
the ecomix models. a  choice between "bernoulli", "poisson",
"ippm" (inhomogeneous Poisson point process model), "negative_binomial", "tweedie"
and "gaussian" distributions are possible and applicable to specific types
of data.</p></td>
    </tr>
    <tr>
      <th>offset</th>
      <td><p>a numeric vector of length nrow(data) (n sites) that is included into
the model as an offset. It is included into the conditional part of the model
where conditioning is performed on the SAM.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>a numeric vector of length ncol(Y) (n species) that is used as weights
in the log-likelihood calculations. If NULL (default) then all weights are
assumed to be identically 1. Because we are estimating the log-likelihood
over species (rather than sites), the weights should be a vector n species
long. The exception is under the use of the 'ippm' distribution where
weights must be a nrow(data)*n_species matrix, which provides a
species-specific background weights used to estimate the species-specific
marginal likelihoods.</p></td>
    </tr>
    <tr>
      <th>control</th>
      <td><p>a list of control parameters for optimisation and calculation.
See details. From <code>species_mix.control</code> for details on optimistaion
parameters.</p></td>
    </tr>
    <tr>
      <th>inits</th>
      <td><p>NULL a numeric vector that provides approximate starting values
for species_mix coefficents. These are distribution specific, but at a
minimum you will need pis (additive_logitic transformed), alphas
(intercepts) and betas (mixing coefs).</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>is a matrix genertated from <a href='http://www.rdocumentation.org/packages/stats/topics/model.extract'>model.response</a> containing the species information. The matrix has the dimensions n_sites * n_species.</p></td>
    </tr>
    <tr>
      <th>X</th>
      <td><p>is a design matrix for the archetype_formula dimension n_sites * n_covariates.</p></td>
    </tr>
    <tr>
      <th>G</th>
      <td><p>is the number of species archetypes that are being estimated.</p></td>
    </tr>
    <tr>
      <th>S</th>
      <td><p>is the number of species to be modelled (this will be calculated internally in species_mix())</p></td>
    </tr>
    <tr>
      <th>spp_weights</th>
      <td><p>These are weights on the species logls and are specifically used in the Bayesian Boostrap.</p></td>
    </tr>
    <tr>
      <th>site_spp_weights</th>
      <td><p>These are site and species specific weights. For most distributions these will be the same across all species. But this form is required to correctly estiamte the IPPMs. See species_mix for more details.</p></td>
    </tr>
    <tr>
      <th>y_is_na</th>
      <td><p>This is a logical matrix used specifically with 'ippm' modelling - don't worry about this, it'll be worked out for you. Yay!</p></td>
    </tr>
    <tr>
      <th>distribution_numeric</th>
      <td><p>the error distribution to used in species_mix estimation. Currently, 'bernoulli', 'poisson', 'ippm' (Poisson point process), 'negative_binomial' and 'guassian' are avaliable - internal conversion of distribution to a integer.</p></td>
    </tr>
    <tr>
      <th>maxit</th>
      <td><p>Maximum number of evaluations of the objective function allowed. Defaults to 500.</p></td>
    </tr>
    <tr>
      <th>trace</th>
      <td><p>int 1=model will report parameter estimates and loglikelihood at each iteration. 0=quite.</p></td>
    </tr>
    <tr>
      <th>cores</th>
      <td><p>The number of cores to use in fitting of species mix models. These will be largely used to model the species-specific parameteres.</p></td>
    </tr>
    <tr>
      <th>residuals</th>
      <td><p>logical if TRUE model will estimate residuals.</p></td>
    </tr>
    <tr>
      <th>em_prefit</th>
      <td><p>Logical if TRUE the model will run a slower EM algorithim fit to find starting values.</p></td>
    </tr>
    <tr>
      <th>em_steps</th>
      <td><p>int Default is 3, the number of EM iterations to get to starting values.</p></td>
    </tr>
    <tr>
      <th>em_refit</th>
      <td><p>int Default is 1, number of times to refit using EM.</p></td>
    </tr>
    <tr>
      <th>dat</th>
      <td><p>a matrix of variables to simulate data from.</p></td>
    </tr>
    <tr>
      <th>theta</th>
      <td><p>coefficents for each species archetype. Matrix of G x number of parameters. Each row is a different species archetype.</p></td>
    </tr>
    <tr>
      <th>archetype_fromula</th>
      <td><p>an object of class "formula" (or an object that can be
coerced to that class). The response variable (left hand side of the
formula) needs to be either 'presence', 'occurrence', 'abundance',
'biomass' or 'quantity' data. The type of reponse data will help specify
the type of error distribution to be used. The dependent variables
(the right hind side) of this formula specifies the dependence of the
species archetype probabilities on covariates. For all model the basic
formula structure follows something like this:
cbind(spp1,spp2,spp3)~1+temperature+rainfall</p></td>
    </tr>
    <tr>
      <th>model_data</th>
      <td><p>a matrix of dataframe which contains the 'species_data'
matrix, a const and the covariates in the strucute of spp1, spp2, spp3,
const, temperature, rainfall. dims of matirx should be
nsites*(nspecies+const+covariates).</p></td>
    </tr>
    <tr>
      <th>offset</th>
      <td><p>this is a vector of site specific offsets, this might be something like area sampled at sites.</p></td>
    </tr>
    <tr>
      <th>control</th>
      <td><p>this is a list of control parameters that alter the specifics of model fitting. See species_mix.control for details.</p></td>
    </tr>
    <tr>
      <th>inits</th>
      <td><p>This will be a vector of starting values for species_mix (i.e you've fitted a model and want to refit it).</p></td>
    </tr>
    <tr>
      <th>quite</th>
      <td><p>Should any reporting be performed? Default is FALSE, for reporting.</p></td>
    </tr>
    <tr>
      <th>reltol</th>
      <td><p>function that determines the relative tolernace for model convergence. Default is quite strict.</p></td>
    </tr>
    <tr>
      <th>calculate_hessian</th>
      <td><p>logical if TRUE model will numerically estimate the variance covariance matrix.</p></td>
    </tr>
    <tr>
      <th>archtype_formula</th>
      <td><p>formula to simulate species_mix data, needs to have the format: cbind(spp1,spp2,spp3,...,sppN)~1 + x1 + x2</p></td>
    </tr>
    <tr>
      <th>species_formula</th>
      <td><p>formula to simulate species_mix species-specific responses, e.g: ~1</p></td>
    </tr>
    <tr>
      <th>distribution</th>
      <td><p>Which statistical distribution to simulate data for. 'bernoulli', 'gaussian', 'ippm', 'negative_binomial','poisson' and 'tweedie'.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>species_mix is used to fit mixtures of glms to multivariate
species data. The function uses BFGS to optimise the mixture likelihood.
There is the option to use EM algorithm to get appropriate starting parameters.
`species_mix` acts as a wrapper for fitmix.cpp that allows for easier data
input. The data frames are merged into the appropriate format for the use
in fitmix.cpp. Minima is found using vmmin (BFGS). Currently 'bernoulli',
'poisson', 'ippm' (inhomogenous Poisson point process), 'negative_binomial'
 and 'tweedie' distributions can be fitted using the species_mix function.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'>library</span>(<span class='no'>ecomix</span>)
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>sam_form</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/formula'>as.formula</a></span>(<span class='fu'>paste0</span>(<span class='st'>'cbind('</span>,<span class='fu'>paste</span>(<span class='fu'>paste0</span>(<span class='st'>'spp'</span>,<span class='fl'>1</span>:<span class='fl'>20</span>),<span class='kw'>collapse</span> <span class='kw'>=</span> <span class='st'>','</span>),<span class='st'>")~1+x1+x2"</span>))
<span class='no'>sp_form</span> <span class='kw'>&lt;-</span> ~ <span class='fl'>1</span>
<span class='no'>theta</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='fl'>1</span>,-<span class='fl'>2.9</span>,-<span class='fl'>3.6</span>,<span class='fl'>1</span>,-<span class='fl'>0.9</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>.9</span>,<span class='fl'>7.9</span>),<span class='fl'>3</span>,<span class='fl'>3</span>,<span class='kw'>byrow</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>y</span><span class='kw'>=</span><span class='fu'>rep</span>(<span class='fl'>1</span>,<span class='fl'>100</span>),<span class='kw'>x1</span><span class='kw'>=</span><span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/Uniform'>runif</a></span>(<span class='fl'>100</span>,<span class='fl'>0</span>,<span class='fl'>2.5</span>),<span class='kw'>x2</span><span class='kw'>=</span><span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/Normal'>rnorm</a></span>(<span class='fl'>100</span>,<span class='fl'>0</span>,<span class='fl'>2.5</span>))
<span class='no'>dat</span>[,-<span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='fu'>scale</span>(<span class='no'>dat</span>[,-<span class='fl'>1</span>])
<span class='no'>simulated_data</span> <span class='kw'>&lt;-</span> <span class='fu'>simulate_species_mix_data</span>(<span class='kw'>archetype_formula</span><span class='kw'>=</span><span class='no'>sam_form</span>, <span class='kw'>species_formula</span><span class='kw'>=</span><span class='no'>sp_form</span>,
                                            <span class='no'>dat</span>,<span class='no'>theta</span>,<span class='kw'>dist</span><span class='kw'>=</span><span class='st'>"bernoulli"</span>)
<span class='no'>model_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='data_prep.html'>make_mixture_data</a></span>(<span class='kw'>species_data</span> <span class='kw'>=</span> <span class='no'>simulated_data</span>$<span class='no'>species_data</span>,
                                <span class='kw'>covariate_data</span> <span class='kw'>=</span> <span class='no'>simulated_data</span>$<span class='no'>covariate_data</span>[,-<span class='fl'>1</span>])
<span class='no'>fm1</span> <span class='kw'>&lt;-</span> <span class='fu'>species_mix</span>(<span class='no'>sam_form</span>, <span class='no'>sp_form</span>, <span class='no'>model_data</span>, <span class='kw'>distribution</span> <span class='kw'>=</span> <span class='st'>'bernoulli'</span>,
 <span class='kw'>n_mixtures</span><span class='kw'>=</span><span class='fl'>3</span>)
<span class='co'># }</span><span class='co'># NOT RUN {</span>
<span class='no'>fmods</span> <span class='kw'>&lt;-</span> <span class='fu'>species_mix.multifit</span>(<span class='no'>sam_form</span>, <span class='no'>sp_form</span>, <span class='no'>model_data</span>, <span class='kw'>distribution</span> <span class='kw'>=</span> <span class='st'>'bernoulli'</span>, <span class='kw'>nstarts</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>n_mixtures</span><span class='kw'>=</span><span class='fl'>3</span>)
<span class='co'># }</span><span class='co'># NOT RUN {</span>
<span class='no'>archetype_formula</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/formula'>as.formula</a></span>(<span class='fu'>paste0</span>(<span class='st'>'cbind('</span>,<span class='fu'>paste</span>(<span class='fu'>paste0</span>(<span class='st'>'spp'</span>,<span class='fl'>1</span>:<span class='fl'>20</span>),<span class='kw'>collapse</span> <span class='kw'>=</span> <span class='st'>','</span>),<span class='st'>")~1+x1+x2"</span>))
<span class='no'>theta</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(-<span class='fl'>0.9</span>,-<span class='fl'>0.6</span>,<span class='fl'>0.5</span>,<span class='fl'>1</span>,-<span class='fl'>0.9</span>,<span class='fl'>1</span>,<span class='fl'>0.9</span>,-<span class='fl'>0.9</span>,<span class='fl'>2.9</span>,-<span class='fl'>1</span>,<span class='fl'>0.2</span>,-<span class='fl'>0.4</span>),<span class='fl'>4</span>,<span class='fl'>3</span>,<span class='kw'>byrow</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>y</span><span class='kw'>=</span><span class='fu'>rep</span>(<span class='fl'>1</span>,<span class='fl'>100</span>),<span class='kw'>x1</span><span class='kw'>=</span><span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/Uniform'>runif</a></span>(<span class='fl'>100</span>,<span class='fl'>0</span>,<span class='fl'>2.5</span>),<span class='kw'>x2</span><span class='kw'>=</span><span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/Normal'>rnorm</a></span>(<span class='fl'>100</span>,<span class='fl'>0</span>,<span class='fl'>2.5</span>))
<span class='no'>simulated_data</span> <span class='kw'>&lt;-</span> <span class='fu'>simulate_species_mix_data</span>(<span class='no'>archetype_formula</span>,~<span class='fl'>1</span>,<span class='no'>dat</span>,<span class='no'>theta</span>,<span class='kw'>dist</span><span class='kw'>=</span><span class='st'>"bernoulli"</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Skipton Woolley, Scott Foster, Piers Dunstan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

